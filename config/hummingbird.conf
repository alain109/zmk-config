# Configuration Bluetooth optimisée pour Windows

# Active le Bluetooth
CONFIG_ZMK_BLE=y

# Augmente la puissance du signal BLE (meilleure stabilité)
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# CRITIQUE: Empêche l'effacement automatique des bonds au démarrage
CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=n

# Désactive la demande de code PIN (source fréquente de problèmes Windows)
CONFIG_ZMK_BLE_PASSKEY_ENTRY=n

# Désactive la vérification stricte des souscriptions GATT (améliore compatibilité Windows)
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n

# NOUVEAUX PARAMÈTRES pour améliorer la stabilité:

# Augmente le nombre de profils BLE disponibles
CONFIG_BT_MAX_PAIRED=5

# CRITIQUE pour Windows: Augmente la taille de la queue HID
CONFIG_ZMK_HID_REPORT_QUEUE_SIZE=256

# Réduit les déconnexions intempestives
CONFIG_BT_CONN_PARAM_UPDATE_TIMEOUT=5000

# Optimise les intervalles de connexion (réduit latence et déconnexions)
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12
CONFIG_BT_PERIPHERAL_PREF_LATENCY=30
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# Gestion de l'énergie sans couper la connexion
CONFIG_ZMK_IDLE_TIMEOUT=900000
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=3600000

# Augmente la taille du buffer BLE (améliore stabilité)
CONFIG_BT_L2CAP_TX_BUF_COUNT=8

# Active le contrôle de flux (évite la perte de paquets)
CONFIG_BT_ATT_TX_COUNT=8